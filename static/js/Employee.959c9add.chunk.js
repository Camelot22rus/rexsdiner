"use strict";(self.webpackChunkreact_pizza_v2=self.webpackChunkreact_pizza_v2||[]).push([[539],{6331:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var c=t(3857),a=t(4309),i=t(1648),l=t(5940),n=t(8743),o=t(1180),r=t(3183),d=t(9629),m=t(9520),h=t(5633),p=t(6672),u=t(4453);const x=()=>{const e=(0,a.wA)(),s=(0,m.j)(),{items:t,status:x}=(0,a.d4)(i.x),{totalPrice:j,items:_}=(0,a.d4)(l.V),v=(0,a.d4)(n.J),[N,g]=c.useState(""),[b,y]=c.useState(!0),[C,w]=c.useState(""),[f,k]=c.useState(!1),H=_.reduce((e,s)=>e+s.count,0),S=Math.round(.3*j*100)/100,L=Math.round(.7*j*100)/100;c.useEffect(()=>{(async()=>{s((0,d.y3)({sortBy:"id",order:"asc",category:"",search:"",currentPage:"1"}))})()},[s]);const M=t.filter(e=>e.name.toLowerCase().includes(N.toLowerCase())),V=M.reduce((e,s)=>{var t;const c=null!==(t=s.categorie)&&void 0!==t?t:"\u0411\u0435\u0437 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438";return e[c]||(e[c]=[]),e[c].push(s),e},{}),z=[],B=new Set;for(const c of M){var P;const e=null!==(P=c.categorie)&&void 0!==P?P:"\u0411\u0435\u0437 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438";B.has(e)||(B.add(e),z.push(e))}return(0,u.jsxs)("div",{className:"employee-page",children:[(0,u.jsxs)("div",{className:"",children:[(0,u.jsxs)("div",{className:"employee-header",children:[(0,u.jsx)("h2",{className:"employee-title",children:"\u041f\u0430\u043d\u0435\u043b\u044c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430"}),(0,u.jsxs)("div",{className:"employee-header__controls",children:[(0,u.jsx)("div",{className:"employee-search",children:(0,u.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432...",value:N,onChange:e=>g(e.target.value),className:"employee-search__input"})}),(0,u.jsxs)("button",{className:"employee-orders-btn",onClick:()=>e((0,r.B)()),children:[(0,u.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,u.jsx)("path",{d:"M9 11H15M9 15H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L19.7071 9.70711C19.8946 9.89464 20 10.149 20 10.4142V19C20 20.1046 19.1046 21 18 21H17ZM17 21V11H13V7H7V19H17Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,u.jsx)("span",{children:"\u0417\u0430\u043a\u0430\u0437\u044b"})]})]})]}),(0,u.jsx)("div",{className:"employee-content",children:(0,u.jsx)("div",{className:"product-list",children:"loading"===x?(0,u.jsx)("div",{className:"loading",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u044b..."}):z.map(s=>(0,u.jsxs)("div",{className:"category-section",children:[(0,u.jsx)("h3",{className:"category-title",children:s}),(0,u.jsx)("div",{className:"category-items",children:V[s].map(s=>{const t=(e=>{const s=_.find(s=>s.id===e);return s?s.count:0})(s.id);return(0,u.jsxs)("div",{className:"product-item",children:[(0,u.jsxs)("div",{className:"product-item__info",children:[(0,u.jsx)("h4",{className:"product-item__title",children:s.name}),(0,u.jsxs)("span",{className:"product-item__price",children:[s.price," $"]})]}),(0,u.jsxs)("div",{className:"product-item__controls",children:[t>0&&(0,u.jsx)("button",{className:"product-item__minus",onClick:()=>(s=>{const t=_.find(e=>e.id===s);t&&1===t.count?e((0,o.Ai)(s)):e((0,o.G8)(s))})(s.id),children:"\u2212"}),t>0&&(0,u.jsx)("span",{className:"product-item__count",children:t}),(0,u.jsx)("button",{className:"product-item__add",onClick:()=>(s=>{const t={id:s.id,title:s.name,price:s.price,imageUrl:s.imageUrl,count:0};e((0,o.B5)(t))})(s),children:"+"})]})]},s.id)})})]},s))})})]}),(0,u.jsxs)("div",{className:"employee-bottom-bar ".concat(b?"collapsed":""),style:{},children:[(0,u.jsx)("button",{className:"employee-toggle-btn",onClick:()=>{y(!b)},"aria-label":b?"Expand bottom bar":"Collapse bottom bar",children:(0,u.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"toggle-icon ".concat(b?"collapsed":""),children:(0,u.jsx)("path",{d:"M18 15l-6-6-6 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,u.jsxs)("div",{className:"employee-bottom-content",children:[(0,u.jsx)("div",{className:"employee-total",children:(0,u.jsxs)("div",{className:"employee-total__main",children:[(0,u.jsxs)("span",{className:"employee-total__count",children:[H," \u043f\u043e\u0437\u0438\u0446\u0438\u0439"]}),(0,u.jsxs)("span",{className:"employee-total__price",children:[j," $"]})]})}),_.filter(e=>e.count>0).length>0&&(0,u.jsxs)("div",{className:"employee-cart-list",children:[(0,u.jsx)("h4",{className:"cart-list__title",children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b:"}),(0,u.jsx)("div",{className:"cart-list__items",children:_.filter(e=>e.count>0).map(e=>{var s;const c=t.find(s=>s.id===e.id),a=(null===c||void 0===c?void 0:c.comboComponents)&&c.comboComponents.length>0;return(0,u.jsxs)("div",{className:"cart-list__item",children:[(0,u.jsxs)("div",{className:"cart-item__header",children:[(0,u.jsx)("span",{className:"cart-item__name",children:e.title}),(0,u.jsxs)("div",{className:"cart-item__details",children:[(0,u.jsxs)("span",{className:"cart-item__count",children:[e.count,"x"]}),(0,u.jsxs)("span",{className:"cart-item__price",children:[e.price*e.count," $"]})]})]}),a&&(0,u.jsxs)("div",{className:"cart-item__combo-components",children:[(0,u.jsx)("span",{className:"combo-components__label",children:"\u0412\u043a\u043b\u044e\u0447\u0430\u0435\u0442:"}),(0,u.jsx)("div",{className:"combo-components__list",children:null===(s=c.comboComponents)||void 0===s?void 0:s.map(e=>(0,u.jsx)("span",{className:"combo-component",children:e},e))})]})]},e.id)})})]}),(0,u.jsx)("button",{className:"employee-complete-btn ".concat(0===H?"disabled":""),onClick:()=>{if(H>0){const s=(0,p.ZT)(),t={id:s.toString(),items:_.filter(e=>e.count>0),totalPrice:j,totalCount:H,timestamp:(new Date).toISOString(),thirtyPercent:S,seventyPercent:L};e((0,r.Oc)(t)),w("\u0417\u0430\u043a\u0430\u0437 #".concat(s," \u043d\u0430 \u0441\u0443\u043c\u043c\u0443 ").concat(j," $ (").concat(H," \u043f\u043e\u0437\u0438\u0446\u0438\u0439) \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443!")),k(!0),e((0,o.gw)())}},disabled:0===H,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0437\u0430\u043a\u0430\u0437"})]})]}),v&&(0,u.jsx)(h.zZ,{}),(0,u.jsx)(h.UX,{message:C,isVisible:f,onClose:()=>{k(!1),w("")}})]})}}}]);
//# sourceMappingURL=Employee.959c9add.chunk.js.map