"use strict";(self.webpackChunkreact_pizza_v2=self.webpackChunkreact_pizza_v2||[]).push([[539],{6331:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var c=s(3857),n=s(4309),o=s(1648),a=s(5940),i=s(8743),l=s(1180),r=s(3183),d=s(9629),m=s(9520),u=s(5930),p=s(6672),h=s(4453);const x=()=>{const e=(0,n.wA)(),t=(0,m.j)(),{items:s,status:x}=(0,n.d4)(o.x),{totalPrice:v,items:_}=(0,n.d4)(a.V),j=(0,n.d4)(i.J),[N,y]=c.useState(""),[b,g]=c.useState(!0),[C,f]=c.useState(250),[w,k]=c.useState(!1),[L,S]=c.useState(0),[E,M]=c.useState(0),H=_.reduce((e,t)=>e+t.count,0),z=Math.round(.3*v*100)/100,V=Math.round(.7*v*100)/100;c.useEffect(()=>{(async()=>{t((0,d.y3)({sortBy:"id",order:"asc",category:"",search:"",currentPage:"1"}))})()},[t]);const B=s.filter(e=>e.title.toLowerCase().includes(N.toLowerCase())),P=c.useCallback(e=>{if(!w)return;const t=L-e.clientY,s=Math.max(150,Math.min(600,E+t));f(s)},[w,L,E]),Z=c.useCallback(()=>{k(!1)},[]);return c.useEffect(()=>(w?(document.addEventListener("mousemove",P),document.addEventListener("mouseup",Z),document.body.style.cursor="ns-resize",document.body.style.userSelect="none"):(document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",Z),document.body.style.cursor="",document.body.style.userSelect=""),()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",Z),document.body.style.cursor="",document.body.style.userSelect=""}),[w,P,Z]),(0,h.jsxs)("div",{className:"employee-page",children:[(0,h.jsxs)("div",{className:"",children:[(0,h.jsxs)("div",{className:"employee-header",children:[(0,h.jsx)("h2",{className:"employee-title",children:"\u041f\u0430\u043d\u0435\u043b\u044c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430"}),(0,h.jsxs)("div",{className:"employee-header__controls",children:[(0,h.jsx)("div",{className:"employee-search",children:(0,h.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432...",value:N,onChange:e=>y(e.target.value),className:"employee-search__input"})}),(0,h.jsxs)("button",{className:"employee-orders-btn",onClick:()=>e((0,r.B)()),children:[(0,h.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("path",{d:"M9 11H15M9 15H15M17 21H7C5.89543 21 5 20.1046 5 19V5C5 3.89543 5.89543 3 7 3H12.5858C12.851 3 13.1054 3.10536 13.2929 3.29289L19.7071 9.70711C19.8946 9.89464 20 10.149 20 10.4142V19C20 20.1046 19.1046 21 18 21H17ZM17 21V11H13V7H7V19H17Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,h.jsx)("span",{children:"\u0417\u0430\u043a\u0430\u0437\u044b"})]})]})]}),(0,h.jsx)("div",{className:"employee-content",children:(0,h.jsx)("div",{className:"product-list",children:"loading"===x?(0,h.jsx)("div",{className:"loading",children:"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u044b..."}):B.map(t=>{const s=(e=>{const t=_.find(t=>t.id===e);return t?t.count:0})(t.id);return(0,h.jsxs)("div",{className:"product-item",children:[(0,h.jsxs)("div",{className:"product-item__info",children:[(0,h.jsx)("h4",{className:"product-item__title",children:t.title}),(0,h.jsxs)("span",{className:"product-item__price",children:[t.price," $"]})]}),(0,h.jsxs)("div",{className:"product-item__controls",children:[s>0&&(0,h.jsx)("button",{className:"product-item__minus",onClick:()=>(t=>{const s=_.find(e=>e.id===t);s&&1===s.count?e((0,l.Ai)(t)):e((0,l.G8)(t))})(t.id),children:"\u2212"}),s>0&&(0,h.jsx)("span",{className:"product-item__count",children:s}),(0,h.jsx)("button",{className:"product-item__add",onClick:()=>(t=>{const s={id:t.id,title:t.title,price:t.price,imageUrl:t.imageUrl,count:0};e((0,l.B5)(s))})(t),children:"+"})]})]},t.id)})})})]}),(0,h.jsxs)("div",{className:"employee-bottom-bar ".concat(b?"collapsed":""," ").concat(w?"resizing":""),style:{height:b?"90px":"".concat(C,"px"),transition:w?"none":"height 0.3s ease"},children:[(0,h.jsx)("button",{className:"employee-toggle-btn",onMouseDown:e=>{e.preventDefault();const t=setTimeout(()=>{k(!0),S(e.clientY),M(C)},150),s=()=>{clearTimeout(t),w||g(!b),document.removeEventListener("mouseup",s)};document.addEventListener("mouseup",s)},"aria-label":b?"Expand bottom bar":"Collapse bottom bar",children:(0,h.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"toggle-icon ".concat(b?"collapsed":""),children:(0,h.jsx)("path",{d:"M18 15l-6-6-6 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,h.jsxs)("div",{className:"employee-bottom-content",children:[(0,h.jsx)("div",{className:"employee-total",children:(0,h.jsxs)("div",{className:"employee-total__main",children:[(0,h.jsxs)("span",{className:"employee-total__count",children:[H," \u043f\u043e\u0437\u0438\u0446\u0438\u0439"]}),(0,h.jsxs)("span",{className:"employee-total__price",children:[v," $"]})]})}),_.filter(e=>e.count>0).length>0&&(0,h.jsxs)("div",{className:"employee-cart-list",children:[(0,h.jsx)("h4",{className:"cart-list__title",children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b:"}),(0,h.jsx)("div",{className:"cart-list__items",children:_.filter(e=>e.count>0).map(e=>{var t;const c=s.find(t=>t.id===e.id),n=(null===c||void 0===c?void 0:c.comboComponents)&&c.comboComponents.length>0;return(0,h.jsxs)("div",{className:"cart-list__item",children:[(0,h.jsxs)("div",{className:"cart-item__header",children:[(0,h.jsx)("span",{className:"cart-item__name",children:e.title}),(0,h.jsxs)("div",{className:"cart-item__details",children:[(0,h.jsxs)("span",{className:"cart-item__count",children:[e.count,"x"]}),(0,h.jsxs)("span",{className:"cart-item__price",children:[e.price*e.count," $"]})]})]}),n&&(0,h.jsxs)("div",{className:"cart-item__combo-components",children:[(0,h.jsx)("span",{className:"combo-components__label",children:"\u0412\u043a\u043b\u044e\u0447\u0430\u0435\u0442:"}),(0,h.jsx)("div",{className:"combo-components__list",children:null===(t=c.comboComponents)||void 0===t?void 0:t.map(e=>(0,h.jsx)("span",{className:"combo-component",children:e},e))})]})]},e.id)})})]}),(0,h.jsx)("button",{className:"employee-complete-btn ".concat(0===H?"disabled":""),onClick:()=>{if(H>0){const t=(0,p.ZT)(),s={id:t.toString(),items:_.filter(e=>e.count>0),totalPrice:v,totalCount:H,timestamp:(new Date).toISOString(),thirtyPercent:z,seventyPercent:V};e((0,r.Oc)(s)),alert("\u0417\u0430\u043a\u0430\u0437 #".concat(t," \u043d\u0430 \u0441\u0443\u043c\u043c\u0443 ").concat(v," $ (").concat(H," \u043f\u043e\u0437\u0438\u0446\u0438\u0439) \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443!")),e((0,l.gw)())}},disabled:0===H,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0437\u0430\u043a\u0430\u0437"})]})]}),j&&(0,h.jsx)(u.zZ,{})]})}}}]);
//# sourceMappingURL=Employee.aff8fce4.chunk.js.map